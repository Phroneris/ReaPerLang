History

2024/02/16
ver 1.12
環境更新できて良かった～～～いやもうPerl捨ててNode.jsとかで良くない？ exe配布要る？
・開発環境を更新。
  ・Strawberry Perl 5.24.0.1 → 5.36.1
  ・PAR::Packer 1.035 → 1.061
・自身のバージョン表記法を "ver X.XX" から "vX.XX" に変更。
・全体的に読みやすくリファクタリング。
  ・演算子や else の周りにほぼ必ずスペースを挿入。（なんで入れてなかったの？）
  ・else も if/elsif と同様に直前の波括弧の前で改行。
  ・if のような文法上のブロックや何となくまとまりだと思う処理には前後に空行を挿入。
  ・インラインコメントはその手前のコードとの間に2個以上スペースを挿入。
  ・コードの区切りの見出しコメントは複数の "#" でインデント。
  ・1行だけのブロック内にも必ず終端セミコロンを付加。（map { こういうやつ; } @_）
  ・シグネチャ機能でサブルーチンの引数を明示。
    ・そのために、利用するPerlのバージョンを use で指定。
      ・付随して、strict/warnings の扱いを開発時の use ではなくリリース時の no に変更。
  ・サブルーチンにdocstringっぽい説明を追加。
・シェバンを修正。
・&abort() の処理をより明確な異常終了（die）に変更。
  ・付随して、"Press enter" の処理を &abort() 内から END ブロックに移行。
・ターミナル出力のインデント管理を各種サブルーチンで厳密化
・各種出力で「┃」「━」等の全角太罫線を全角幅のつもりで使っていたが、
  OSや言語環境によっては半角幅で表示されるので、"||" "=" 等のASCII文字に変更。

2020/07/26
ver 1.11
まさか公式テンプレの命名則が変わるとは…。
・処理開始直前に処理内容の確認を追加。
・入力テンプレファイル指定時、頭の "template_" の有無を問わないように変更。
・裏技モード時、失われた翻訳が全く無いセクションを記録しないように変更。
・コンソール表示を少し見やすく修正。

2020/03/23
ver 1.10
大幅更新！（そうか？）
・入力ファイル指定時の拡張子を、以下の4種から自動識別する機能を追加。
  ・.ReaperLangPack
  ・.txt
  ・.ReaperLangPack.txt
  ・無し（ファイル名として直接指定）
・出力ファイル名が、入力ファイル名を活かしたものになるよう変更。
・lng_newの末尾が失われるというひどすぎる不具合を修正。
・初めましてモードにて、missingにセクション名が記述されないのを修正。
・初めましてモードにて、";/^"で始まるものがmissing扱いになるのを修正。

2018/12/10
ver 1.06
さほど変わってはいない。
・missingにおいて、失われた翻訳が全く無いセクションを記録しないオプションを追加。
・exeファイルをリポジトリに直接含めないようにした。それに伴ってbuildexe.batも移動＆微変更。

2018/04/26
ver 1.05
1.041より、ずっとはやい！
・exe化。ただし、exeを実行する度に"AppData\Local\Temp\par-(何某)"にゴミが蓄積する模様。
・変換前の所属セクション内しか検索しないように変更。
  これにより、例えば[common]からクビになって他セクションに正式加入したものや、
  逆に他セクションから[common]に昇格したものなどは一律無視となった。
  そういう意味では機能低下だが、代わりに冗談抜きで20倍ぐらい早くなった。
・tmpl_crrの文書冒頭の概要部分がlng_newと同じ行数になるように修正。
・セクション名部分に独自のコメントを記載している場合にそれを引き継がせるよう修正。
・（森）の独自記法である意図的な無効化行";/"を翻訳済み行と同様に扱うよう修正。
・missingの頭に実行時のローカル時刻と所要時間を挿入。
・改行の除去指定を"[\r\n]"から"[\x0d\x0a]"に変更。
・初めましてモードとお帰りなさいモードの他に、裏技モードをこっそり追加。
  自動的にお帰りなさいモードかつデフォルトファイル（"sub readtxt"内の2行目参照）となる。
・readmeをWikiに完全移行。

2017/12/16
ver 1.041
やらかしてた…。
・お帰りなさいモードにて、オプション行（;^云々=云々）が拾われないというひどすぎる不具合を修正。
・モード選択後の"out:"に示されているファイル命名則が間違っていたので修正。
・行合わせされたtemplateファイルもやっぱり欲しいので出力ファイルに追加。
・missingの頭にいっそ全ての入出力ファイル名を挿入。
・readmeのモード部分などを整形。

2017/09/12
ver 1.04
なんとかした。
・Notepad++でコーディング、「Perlを始めよう！」でデバッグ。
・初めましてモードとお帰りなさいモードを単一のプログラムに統合。
・動作デモのgifアニメを作成。
・ソースの可読性と標準出力の親切さを向上。
・missingの頭に元template名を挿入。
・変数を局所化したりリテラルのダブルクォーテーションを避けたりして高速化を図った。
・dialogをsectionに改名。
・ソースのUTF-8化に伴い、文字エンコーディング周りをまじでがんばった。
・読み込み時、後からmapでデコードするのと元からuse open IO => ':utf8';にするのと、
  同じだと思うんだけどなぜか後者は失敗する…。
・配列を一要素ずつ愚直にループ回すよりmapとかで一括処理した方が早いかと思ったけど、
  実際にやってみたら別にそんなことはなかった。
・各種whileを回すのも、本当は愚直に頭から読むより最適な方法がありそうだが、ひとまず放置。


